"use strict";(self["webpackChunkvue_frontend"]=self["webpackChunkvue_frontend"]||[]).push([[290],{290:function(t,s,a){a.r(s),a.d(s,{default:function(){return u}});var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"music-player-page"},[s("div",{staticClass:"page-header"},[s("div",{staticClass:"header-content"},[t._m(0),s("div",{staticClass:"header-stats"},[s("span",{staticClass:"song-count"},[t._v(t._s(t.songs.length)+" é¦–éŸ³ä¹")]),s("span",{staticClass:"divider"},[t._v("Â·")]),s("span",{staticClass:"history-count"},[t._v(t._s(t.playHistory.length)+" æ¡æ’­æ”¾åŽ†å²")])])])]),s("div",{staticClass:"player-container",style:t.playerBgStyle},[s("div",{staticClass:"album-section"},[s("div",{staticClass:"album-cover-container"},[s("div",{staticClass:"album-shadow"}),s("div",{staticClass:"album-cover circular",class:{rotating:t.isPlaying&&t.currentSong}},[s("img",{staticClass:"cover-img",attrs:{src:t.currentSong?.cover||"/default-album.png",alt:"ä¸“è¾‘å°é¢"}}),s("div",{staticClass:"album-center"})])]),s("div",{staticClass:"song-info"},[s("h2",{staticClass:"song-title",attrs:{title:t.currentSong?.title||"æœªæ’­æ”¾æ­Œæ›²"}},[t._v(" "+t._s(t.currentSong?.title||"æœªæ’­æ”¾æ­Œæ›²")+" ")]),s("p",{staticClass:"song-artist",attrs:{title:t.currentSong?.artist||"æœªçŸ¥è‰ºæœ¯å®¶"}},[t._v(" "+t._s(t.currentSong?.artist||"æœªçŸ¥è‰ºæœ¯å®¶")+" ")]),s("div",{staticClass:"song-actions"},[s("button",{staticClass:"action-btn like-btn",class:{liked:t.isCurrentSongLiked},on:{click:t.toggleLike}},[s("img",{staticClass:"icon-image",class:{liked:t.isCurrentSongLiked},attrs:{src:"/icons/cute-heart.svg",alt:"ç‚¹èµž"}})]),s("button",{staticClass:"action-btn share-btn",on:{click:t.shareSong}},[s("img",{staticClass:"icon-image",attrs:{src:"/icons/cute-share.svg",alt:"åˆ†äº«"}})])])])]),s("div",{staticClass:"player-controls-section"},[t.hasSongs?s("div",{staticClass:"progress-container"},[s("span",{staticClass:"time-display current-time"},[t._v(t._s(t.formatTime(t.currentTime)))]),s("div",{staticClass:"progress-wrapper"},[s("input",{staticClass:"progress-bar",attrs:{type:"range",min:"0",max:"100"},domProps:{value:t.progress},on:{input:t.updateProgress,mousedown:function(s){t.isDragging=!0},mouseup:function(s){t.isDragging=!1},touchstart:function(s){t.isDragging=!0},touchend:function(s){t.isDragging=!1}}}),s("div",{staticClass:"progress-bar-fill",style:{width:t.progress+"%"}})]),s("span",{staticClass:"time-display total-time"},[t._v(t._s(t.formatTime(t.duration)))])]):t._e(),s("div",{staticClass:"player-controls"},[s("button",{staticClass:"control-btn repeat-btn",class:{active:t.isRepeating},on:{click:t.toggleRepeat}},[s("img",{staticClass:"control-icon",attrs:{src:"/icons/cute-repeat.svg",alt:"é‡å¤"}})]),s("button",{staticClass:"control-btn prev-btn",attrs:{disabled:!t.hasSongs},on:{click:t.playPrevious}},[s("img",{staticClass:"control-icon",attrs:{src:"/icons/cute-prev.svg",alt:"ä¸Šä¸€é¦–"}})]),s("button",{staticClass:"control-btn play-btn",attrs:{disabled:!t.hasSongs},on:{click:t.togglePlay}},[s("img",{staticClass:"control-icon play-icon",attrs:{src:t.isPlaying?"/icons/cute-pause.svg":"/icons/cute-play.svg",alt:"æ’­æ”¾"}})]),s("button",{staticClass:"control-btn next-btn",attrs:{disabled:!t.hasSongs},on:{click:t.playNext}},[s("img",{staticClass:"control-icon",attrs:{src:"/icons/cute-next.svg",alt:"ä¸‹ä¸€é¦–"}})]),s("button",{staticClass:"control-btn shuffle-btn",class:{active:t.isShuffling},on:{click:t.toggleShuffle}},[s("img",{staticClass:"control-icon",attrs:{src:"/icons/cute-shuffle.svg",alt:"éšæœº"}})])]),t.hasSongs?s("div",{staticClass:"volume-control"},[s("button",{staticClass:"volume-btn",on:{click:t.toggleMute}},[s("img",{staticClass:"volume-icon",attrs:{src:"/icons/cute-volume.svg",alt:"éŸ³é‡"}})]),s("div",{staticClass:"volume-slider-wrapper"},[s("input",{staticClass:"volume-slider",attrs:{type:"range",min:"0",max:"100"},domProps:{value:t.isMuted?0:t.volume},on:{input:t.updateVolume}})]),s("span",{staticClass:"volume-text"},[t._v(t._s(t.isMuted?0:t.volume)+"%")])]):t._e()])]),s("div",{staticClass:"music-tabs"},[s("div",{staticClass:"tabs-header"},[s("button",{staticClass:"tab-btn",class:{active:"songs"===t.activeTab},on:{click:function(s){t.activeTab="songs"}}},[s("img",{staticClass:"tab-icon",attrs:{src:"/icons/cute-music.svg",alt:"éŸ³ä¹åˆ—è¡¨"}}),t._v(" éŸ³ä¹åˆ—è¡¨ ")]),s("button",{staticClass:"tab-btn",class:{active:"history"===t.activeTab},on:{click:function(s){t.activeTab="history"}}},[s("img",{staticClass:"tab-icon",attrs:{src:"/icons/cute-history.svg",alt:"åŽ†å²è®°å½•"}}),t._v(" åŽ†å²è®°å½• ")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:"songs"===t.activeTab,expression:"activeTab === 'songs'"}],staticClass:"tab-content"},[s("div",{staticClass:"songs-filter"},[s("div",{staticClass:"search-input-wrapper"},[s("img",{staticClass:"search-icon",attrs:{src:"/icons/cute-search.svg",alt:"æœç´¢"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"search-input",attrs:{type:"text",placeholder:"æœç´¢æ­Œæ›²ã€æ­Œæ‰‹..."},domProps:{value:t.searchQuery},on:{input:function(s){s.target.composing||(t.searchQuery=s.target.value)}}}),t.searchQuery?s("button",{staticClass:"clear-search",on:{click:t.clearSearch}},[t._v(" âœ• ")]):t._e()]),s("div",{staticClass:"filter-stats"},[t._v(" æ‰¾åˆ° "+t._s(t.filteredSongs.length)+" é¦–æ­Œæ›² ")])]),s("div",{staticClass:"songs-list"},[t._l(t.filteredSongs,function(a,e){return s("div",{key:a.id,staticClass:"song-item",class:{active:t.currentSongIndex===e,hovered:t.hoveredSongIndex===e},on:{click:function(s){return t.playSong(e)},mouseenter:function(s){t.hoveredSongIndex=e},mouseleave:function(s){t.hoveredSongIndex=-1}}},[s("div",{staticClass:"song-number"},[t._v(t._s(e+1))]),s("div",{staticClass:"song-cover-mini"},[s("img",{attrs:{src:a.cover||"/default-album.png",alt:"æ­Œæ›²å°é¢"}})]),s("div",{staticClass:"song-details"},[s("div",{staticClass:"song-name"},[t._v(t._s(a.title))]),s("div",{staticClass:"song-artist-name"},[t._v(t._s(a.artist))])]),s("div",{staticClass:"song-album"},[t._v(t._s(a.album||"æœªçŸ¥ä¸“è¾‘"))]),s("div",{staticClass:"song-duration"},[t._v(t._s(t.formatTime(a.duration)))]),s("div",{staticClass:"song-actions-hover"},[s("button",{staticClass:"action-btn-play",on:{click:function(s){return s.stopPropagation(),t.playSong(e)}}},[s("img",{staticClass:"icon-image",attrs:{src:"/icons/cute-play-btn.svg",alt:"æ’­æ”¾"}})])])])}),0===t.filteredSongs.length?s("div",{staticClass:"empty-state"},[s("img",{staticClass:"empty-icon",attrs:{src:"/icons/cute-music.svg",alt:"æš‚æ— æ­Œæ›²"}}),s("div",{staticClass:"empty-text"},[t._v(t._s(t.searchQuery?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ­Œæ›²":"æš‚æ— æ­Œæ›²"))]),s("div",{staticClass:"empty-hint"},[t._v(" "+t._s(t.searchQuery?"è¯•è¯•å…¶ä»–å…³é”®è¯æœç´¢":"æ·»åŠ ä¸€äº›æ­Œæ›²å¼€å§‹äº«å—éŸ³ä¹å§")+" ")])]):t._e()],2)]),s("div",{directives:[{name:"show",rawName:"v-show",value:"history"===t.activeTab,expression:"activeTab === 'history'"}],staticClass:"tab-content"},[s("div",{staticClass:"history-header"},[s("h3",{staticClass:"history-title"},[t._v("æ’­æ”¾åŽ†å²")]),t.playHistory.length>0?s("button",{staticClass:"clear-history",on:{click:t.clearAllHistory}},[t._v(" æ¸…ç©ºåŽ†å² ")]):t._e()]),s("div",{staticClass:"history-list"},[t._l(t.playHistory,function(a,e){return s("div",{key:e,staticClass:"history-item",on:{click:function(s){return t.playHistorySong(a.songIndex)},mouseenter:function(s){t.hoveredHistoryIndex=e},mouseleave:function(s){t.hoveredHistoryIndex=-1}}},[s("div",{staticClass:"history-time"},[t._v(t._s(t.formatDate(a.timestamp)))]),s("div",{staticClass:"history-cover-mini"},[s("img",{attrs:{src:a.song.cover||"/default-album.png",alt:"æ­Œæ›²å°é¢"}})]),s("div",{staticClass:"history-song-info"},[s("div",{staticClass:"history-song-name"},[t._v(t._s(a.song.title))]),s("div",{staticClass:"history-song-artist"},[t._v(t._s(a.song.artist))])]),s("div",{staticClass:"history-actions"},[s("button",{staticClass:"history-remove-btn",class:{visible:t.hoveredHistoryIndex===e},on:{click:function(s){return s.stopPropagation(),t.removeFromHistory(e)}}},[t._v(" âœ• ")])])])}),0===t.playHistory.length?s("div",{staticClass:"empty-state"},[s("img",{staticClass:"empty-icon",attrs:{src:"/icons/cute-history.svg",alt:"æš‚æ— åŽ†å²"}}),s("div",{staticClass:"empty-text"},[t._v("æš‚æ— æ’­æ”¾åŽ†å²")]),s("div",{staticClass:"empty-hint"},[t._v("æ’­æ”¾éŸ³ä¹åŽä¼šè‡ªåŠ¨è®°å½•åœ¨è¿™é‡Œ")])]):t._e()],2)])])])},i=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"logo-area"},[s("img",{staticClass:"music-icon",attrs:{src:"/icons/cute-music.svg",alt:"éŸ³ä¹"}}),s("h1",{staticClass:"page-title"},[t._v("äº‘éŸ³ä¹")])])}],o=(a(8111),a(2489),a(5353)),r={name:"MusicPlayer",data(){return{activeTab:"songs",searchQuery:"",isDragging:!1,hoveredSongIndex:-1,hoveredHistoryIndex:-1}},computed:{...(0,o.aH)(["isPlaying","currentTime","duration","volume","isMuted","currentSongIndex","isRepeating","isShuffling","likedSongs","songs","playHistory"]),...(0,o.L8)(["currentSong","hasSongs","progress","isCurrentSongLiked"]),filteredSongs(){if(!this.searchQuery)return this.songs;const t=this.searchQuery.toLowerCase();return this.songs.filter(s=>s.title.toLowerCase().includes(t)||s.artist.toLowerCase().includes(t)||s.album.toLowerCase().includes(t))},playerBgStyle(){return this.currentSong,{background:"linear-gradient(135deg, rgb(215, 255, 232) 0%, rgb(231, 224, 255) 100%)"}}},mounted(){this.loadPlayHistory(),document.addEventListener("keydown",this.handleKeydown)},beforeDestroy(){document.removeEventListener("keydown",this.handleKeydown)},methods:{...(0,o.i0)(["togglePlay","playSong","playPrevious","playNext","toggleRepeat","toggleShuffle","toggleLike","updateProgress","updateVolume","toggleMute","handleAudioEnd","clearAllHistory","removeFromHistory","loadPlayHistory"]),getVolumeIcon(){return this.isMuted?"ðŸ”‡":this.volume<30?"ðŸ”ˆ":this.volume<70?"ðŸ”‰":"ðŸ”Š"},shareSong(){if(!this.currentSong)return;const t=`${this.currentSong.title} - ${this.currentSong.artist}`;navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(t).then(()=>{alert("åˆ†äº«ä¿¡æ¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}).catch(t=>{console.error("å¤åˆ¶å¤±è´¥:",t)}):alert(`åˆ†äº«: ${t}`)},clearSearch(){this.searchQuery=""},handleKeydown(t){if("INPUT"!==t.target.tagName)switch(t.key.toLowerCase()){case" ":t.preventDefault(),this.togglePlay(this.$refs.audioPlayer);break;case"arrowright":t.preventDefault();const s=Math.min(this.currentTime+10,this.duration);this.$store.commit("SET_CURRENT_TIME",s),this.$refs.audioPlayer&&(this.$refs.audioPlayer.currentTime=s);break;case"arrowleft":t.preventDefault();const a=Math.max(this.currentTime-10,0);this.$store.commit("SET_CURRENT_TIME",a),this.$refs.audioPlayer&&(this.$refs.audioPlayer.currentTime=a);break;case"arrowup":t.preventDefault();const e=Math.min(this.volume+5,100);this.updateVolume(e);break;case"arrowdown":t.preventDefault();const i=Math.max(this.volume-5,0);this.updateVolume(i);break}},formatTime(t){if(!t||isNaN(t))return"00:00";const s=Math.floor(t/60),a=Math.floor(t%60);return`${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},formatDate(t){const s=new Date(t);return s.toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},playHistorySong(t){this.playSong(t),this.$nextTick(()=>{const t=document.querySelector(".song-item.active");t&&t.scrollIntoView({behavior:"smooth",block:"center"})})},togglePlay(){this.$store.dispatch("togglePlay")},updateProgress(t){const s=parseFloat(t.target.value),a=s/100*this.duration;this.$store.commit("SET_CURRENT_TIME",a)},updateVolume(t){const s="number"===typeof t?t:parseFloat(t.target.value);this.$store.dispatch("updateVolume",s)},toggleMute(){this.$store.dispatch("toggleMute")}}},n=r,c=a(1656),l=(0,c.A)(n,e,i,!1,null,"de70753a",null),u=l.exports}}]);
//# sourceMappingURL=290.c5add81e.js.map